{"componentChunkName":"component---src-templates-post-template-tsx","path":"/pickmydol-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…_2/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EA%B0%9C%EC%9A%94\">ë¬¸ì œ ê°œìš”</a></p>\n<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-1-kafka-%EB%8B%A8%EC%9D%BC-partition%EC%9C%BC%EB%A1%9C-%EC%9D%B8%ED%95%9C-redis-%EB%B3%91%EB%AA%A9\">ë¬¸ì œ 1: Kafka ë‹¨ì¼ Partitionìœ¼ë¡œ ì¸í•œ Redis ë³‘ëª©</a></p>\n<ul>\n<li><a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\">ğŸ”¥ ë¬¸ì œ ìƒí™©</a></li>\n<li><a href=\"#-%EC%9B%90%EC%9D%B8\">ğŸ§¨ ì›ì¸</a></li>\n<li><a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">âœ… í•´ê²° ë°©ë²•</a></li>\n<li><a href=\"#-%EA%B2%BD%ED%97%98-%EC%9A%94%EC%95%BD\">ğŸ“Œ ê²½í—˜ ìš”ì•½</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-2-kafka-consumer-%EC%88%98%EC%8B%A0-%EC%8B%A4%ED%8C%A8-advertisedlisteners-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%A5%98\">ë¬¸ì œ 2: Kafka Consumer ìˆ˜ì‹  ì‹¤íŒ¨ (advertised.listeners ì„¤ì • ì˜¤ë¥˜)</a></p>\n<ul>\n<li><a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9-1\">ğŸ”¥ ë¬¸ì œ ìƒí™©</a></li>\n<li><a href=\"#-%EC%9B%90%EC%9D%B8-1\">ğŸ§¨ ì›ì¸</a></li>\n<li><a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-1\">âœ… í•´ê²° ë°©ë²•</a></li>\n<li><a href=\"#-%EA%B2%BD%ED%97%98-%EC%9A%94%EC%95%BD-1\">ğŸ“Œ ê²½í—˜ ìš”ì•½</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-3-kafka-%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D-%EC%A0%84%ED%99%98\">ë¬¸ì œ 3. Kafka ë™ê¸° ë°©ì‹ â†’ ë¹„ë™ê¸° ë°©ì‹ ì „í™˜</a></p>\n<ul>\n<li><a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9-2\">ğŸ”¥ ë¬¸ì œ ìƒí™©</a></li>\n<li><a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-2\">âœ… í•´ê²° ë°©ë²•</a></li>\n<li><a href=\"#-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-redis-%EC%A0%80%EC%9E%A5\">ğŸ”§ ì˜ˆì‹œ ì½”ë“œ (Redis ì €ì¥)</a></li>\n<li><a href=\"#-%EA%B8%B0%EC%88%A0-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC\">âœ… ê¸°ìˆ  ê°œë… ì •ë¦¬</a></li>\n<li><a href=\"#-%EC%A3%BC%EC%9A%94-%EC%84%B1%EA%B3%BC\">âœ… ì£¼ìš” ì„±ê³¼</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EA%B3%BC-%EB%B0%8F-%ED%9A%8C%EA%B3%A0\">ê²°ê³¼ ë° íšŒê³ </a></p>\n<ul>\n<li><a href=\"#-504-gateway-timeout-%EB%8C%80%EC%9D%91-%EA%B2%BD%ED%97%98-%EA%B8%B0%EB%B0%98-%EA%B3%84%ED%9A%8D\">âœ… 504 Gateway Timeout ëŒ€ì‘ ê²½í—˜ ê¸°ë°˜ ê³„íš</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","html":"<h1 id=\"ë¬¸ì œ-ê°œìš”\" style=\"position:relative;\">ë¬¸ì œ ê°œìš”<a href=\"#%EB%AC%B8%EC%A0%9C-%EA%B0%9C%EC%9A%94\" aria-label=\"ë¬¸ì œ ê°œìš” permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Kafka ê¸°ë°˜ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ í™˜ê²½ì—ì„œ Redis ì €ì¥ ë³‘ëª©ê³¼ ë©”ì‹œì§€ ìˆ˜ì‹  ì‹¤íŒ¨ë¼ëŠ” ë‘ ê°€ì§€ í•µì‹¬ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. ì‹œìŠ¤í…œì€ Kafka â†’ Redis â†’ PostgreSQL íë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ, EC2 ì¸ìŠ¤í„´ìŠ¤ì— Dockerë¡œ êµ¬ì„±ëœ ë¹„ë™ê¸° ì†Œë¹„ì êµ¬ì¡°ì˜€ë‹¤.</p>\n<h2 id=\"ë¬¸ì œ-1-kafka-ë‹¨ì¼-partitionìœ¼ë¡œ-ì¸í•œ-redis-ë³‘ëª©\" style=\"position:relative;\">ë¬¸ì œ 1: Kafka ë‹¨ì¼ Partitionìœ¼ë¡œ ì¸í•œ Redis ë³‘ëª©<a href=\"#%EB%AC%B8%EC%A0%9C-1-kafka-%EB%8B%A8%EC%9D%BC-partition%EC%9C%BC%EB%A1%9C-%EC%9D%B8%ED%95%9C-redis-%EB%B3%91%EB%AA%A9\" aria-label=\"ë¬¸ì œ 1 kafka ë‹¨ì¼ partitionìœ¼ë¡œ ì¸í•œ redis ë³‘ëª© permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"-ë¬¸ì œ-ìƒí™©\" style=\"position:relative;\">ğŸ”¥ ë¬¸ì œ ìƒí™©<a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\" ë¬¸ì œ ìƒí™© permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì´ˆê¸° Kafka Topicì´ ë‹¨ì¼ Partitionìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì—ˆê³ , Consumer ë˜í•œ 1ê°œë§Œ ì¡´ì¬í•œ êµ¬ì¡°ì˜€ë‹¤. ì´ êµ¬ì¡°ì—ì„œëŠ” ëª¨ë“  ë©”ì‹œì§€ ì²˜ë¦¬ë¥¼ í•˜ë‚˜ì˜ Consumerê°€ ë‹´ë‹¹í•˜ë©°, Redis ì €ì¥ ì‘ì—…ë„ ë³‘ë ¬ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šì•„ Redis ë³‘ëª©ì´ ë°œìƒí–ˆë‹¤.</p>\n<h3 id=\"-ì›ì¸\" style=\"position:relative;\">ğŸ§¨ ì›ì¸<a href=\"#-%EC%9B%90%EC%9D%B8\" aria-label=\" ì›ì¸ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>KafkaëŠ” Partition ìˆ˜ì— ë”°ë¼ ë©”ì‹œì§€ê°€ Consumerì— ë¶„ì‚°ëœë‹¤. í•˜ì§€ë§Œ ë‹¨ì¼ Partition â†’ ë‹¨ì¼ Consumer êµ¬ì¡°ì—ì„œëŠ” ìˆ˜í‰ í™•ì¥ì´ ë¶ˆê°€ëŠ¥í–ˆê³ , **burst íŠ¸ë˜í”½(300,000 ìˆ˜ì¤€)**ì„ ê°ë‹¹í•˜ì§€ ëª»í•˜ëŠ” ë³‘ëª©ì ì´ ë˜ì—ˆë‹¤.</p>\n<h3 id=\"-í•´ê²°-ë°©ë²•\" style=\"position:relative;\">âœ… í•´ê²° ë°©ë²•<a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\" í•´ê²° ë°©ë²• permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Kafka Topicì„ 300ê°œ Partitionìœ¼ë¡œ í™•ì¥</p>\n<p>ë™ì¼í•œ group.idë¥¼ ê°€ì§„ Consumer ì»¨í…Œì´ë„ˆë¥¼ ì—¬ëŸ¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë¶„ì‚° ë°°í¬</p>\n<p>Kafkaì˜ Partition-to-Consumer Mapping êµ¬ì¡°ë¥¼ í™œìš©í•˜ì—¬ Redis ì €ì¥ ì‘ì—…ì„ ë³‘ë ¬ ë¶„ì‚°</p>\n<h3 id=\"-ê²½í—˜-ìš”ì•½\" style=\"position:relative;\">ğŸ“Œ ê²½í—˜ ìš”ì•½<a href=\"#-%EA%B2%BD%ED%97%98-%EC%9A%94%EC%95%BD\" aria-label=\" ê²½í—˜ ìš”ì•½ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì´ ê²½í—˜ì€ Kafka êµ¬ì¡°ì— ëŒ€í•œ ì‹¤ì „ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ë³‘ëª© ì§€ì  ë¶„ì„ â†’ êµ¬ì¡° ì¬ì„¤ê³„ë¥¼ í†µí•´ Burst íŠ¸ë˜í”½ ì²˜ë¦¬ìš© ì•„í‚¤í…ì²˜ë¥¼ ì™„ì„±í•œ ì‚¬ë¡€ì˜€ë‹¤.</p>\n<h2 id=\"ë¬¸ì œ-2-kafka-consumer-ìˆ˜ì‹ -ì‹¤íŒ¨-advertisedlisteners-ì„¤ì •-ì˜¤ë¥˜\" style=\"position:relative;\">ë¬¸ì œ 2: Kafka Consumer ìˆ˜ì‹  ì‹¤íŒ¨ (advertised.listeners ì„¤ì • ì˜¤ë¥˜)<a href=\"#%EB%AC%B8%EC%A0%9C-2-kafka-consumer-%EC%88%98%EC%8B%A0-%EC%8B%A4%ED%8C%A8-advertisedlisteners-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%A5%98\" aria-label=\"ë¬¸ì œ 2 kafka consumer ìˆ˜ì‹  ì‹¤íŒ¨ advertisedlisteners ì„¤ì • ì˜¤ë¥˜ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"-ë¬¸ì œ-ìƒí™©-1\" style=\"position:relative;\">ğŸ”¥ ë¬¸ì œ ìƒí™©<a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9-1\" aria-label=\" ë¬¸ì œ ìƒí™© 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Kafka Consumerê°€ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ì§€ ëª»í•˜ê³  íƒ€ì„ì•„ì›ƒì´ ì§€ì† ë°œìƒ.</p>\n<h3 id=\"-ì›ì¸-1\" style=\"position:relative;\">ğŸ§¨ ì›ì¸<a href=\"#-%EC%9B%90%EC%9D%B8-1\" aria-label=\" ì›ì¸ 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Kafka server.properties íŒŒì¼ì˜ advertised.listeners ê°’ì´ localhost:9092ë¡œ ê³ ì •ë˜ì–´ ìˆì—ˆê³ , ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ëŠ” EC2 ê¸°ë°˜ ConsumerëŠ” Private IPë¥¼ ê²½ìœ í•´ ì ‘ê·¼í•´ì•¼ í–ˆìŒ.\nâ†’ Brokerê°€ ìì‹ ì˜ ì£¼ì†Œë¥¼ ì˜ëª» ì•Œë ¤ì£¼ëŠ” êµ¬ì¡°ì˜€ê³ , DNS ë° NAT ë¬¸ì œì™€ ì—°ê²°ë˜ì–´ í†µì‹ ì´ ì‹¤íŒ¨í•¨.</p>\n<h3 id=\"-í•´ê²°-ë°©ë²•-1\" style=\"position:relative;\">âœ… í•´ê²° ë°©ë²•<a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-1\" aria-label=\" í•´ê²° ë°©ë²• 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>EC2 ë‚´ ë©”íƒ€ë°ì´í„°ì—ì„œ ì‹¤ì œ Private IPë¥¼ ë™ì ìœ¼ë¡œ ì¶”ì¶œ</p>\n<p>advertised.listeners ê°’ì„ ${EC2_IP}:9092 í˜•ì‹ìœ¼ë¡œ ìë™ ì£¼ì…í•˜ëŠ” Shell Script ì‘ì„±</p>\n<p>Kafkaë¥¼ ì¬ì‹œì‘í•˜ì—¬ Broker ì£¼ì†Œë¥¼ ì˜¬ë°”ë¥´ê²Œ ì¸ì‹ì‹œí‚´</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">EC2_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s http://169.254.169.254/latest/meta-data/local-ipv4<span class=\"token variable\">)</span></span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"advertised.listeners=PLAINTEXT://<span class=\"token variable\">${EC2_IP}</span>:9092\"</span> <span class=\"token operator\">>></span> /opt/kafka/config/server.properties\nsystemctl restart kafka</code></pre></div>\n<p>Kafka Consumerê°€ ì •ìƒì ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•¨ì„ ë¡œê·¸ì—ì„œ í™•ì¸í–ˆê³ , ì•ˆì •ì ì¸ íŠ¸ë˜í”½ ìˆ˜ì‹ ì´ ê°€ëŠ¥í•´ì¡Œë‹¤.</p>\n<h3 id=\"-ê²½í—˜-ìš”ì•½-1\" style=\"position:relative;\">ğŸ“Œ ê²½í—˜ ìš”ì•½<a href=\"#-%EA%B2%BD%ED%97%98-%EC%9A%94%EC%95%BD-1\" aria-label=\" ê²½í—˜ ìš”ì•½ 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì´ ê³¼ì •ì—ì„œ Kafka ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ì™€ EC2 ë‚´ ë©”íƒ€ë°ì´í„° í™œìš©, ë™ì  ì„¤ì • ì£¼ì… ìë™í™”ì— ëŒ€í•œ ê²½í—˜ì„ ìŒ“ì•˜ê³ , í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œì˜ Kafka ìš´ì˜ ì‹¤ë¬´ ê°ê°ì„ ì²´ë“í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<h2 id=\"ë¬¸ì œ-3-kafka-ë™ê¸°-ë°©ì‹--ë¹„ë™ê¸°-ë°©ì‹-ì „í™˜\" style=\"position:relative;\">ë¬¸ì œ 3. Kafka ë™ê¸° ë°©ì‹ â†’ ë¹„ë™ê¸° ë°©ì‹ ì „í™˜<a href=\"#%EB%AC%B8%EC%A0%9C-3-kafka-%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D--%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%A9%EC%8B%9D-%EC%A0%84%ED%99%98\" aria-label=\"ë¬¸ì œ 3 kafka ë™ê¸° ë°©ì‹  ë¹„ë™ê¸° ë°©ì‹ ì „í™˜ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"-ë¬¸ì œ-ìƒí™©-2\" style=\"position:relative;\">ğŸ”¥ ë¬¸ì œ ìƒí™©<a href=\"#-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9-2\" aria-label=\" ë¬¸ì œ ìƒí™© 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ê¸°ì¡´ì—ëŠ” @KafkaListener ê¸°ë°˜ ë™ê¸° ë°©ì‹ìœ¼ë¡œ Kafka ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³ , ê° ë©”ì‹œì§€ë¥¼ Redisì— ì €ì¥</p>\n<p>300,000 ìˆ˜ì¤€ì˜ ë²„ìŠ¤íŠ¸ íŠ¸ë˜í”½ ì²˜ë¦¬ ì‹œ ë³‘ëª© ë°œìƒ</p>\n<p>Consumer í•œ ëŒ€ê°€ ëª¨ë“  ë¶€í•˜ë¥¼ ê°ë‹¹</p>\n<p>ì²˜ë¦¬ëŸ‰, íƒ€ì„ì•„ì›ƒ, ì‹¤íŒ¨ ëŒ€ì‘ í•œê³„</p>\n<h3 id=\"-í•´ê²°-ë°©ë²•-2\" style=\"position:relative;\">âœ… í•´ê²° ë°©ë²•<a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-2\" aria-label=\" í•´ê²° ë°©ë²• 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ğŸ’¡ ë¹„ë™ê¸° ë°©ì‹ ë„ì…\nReactor Kafka ê¸°ë°˜ì˜ KafkaReceiver ë„ì…</p>\n<p>ë©”ì‹œì§€ë¥¼ Flux ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ìˆ˜ì‹ í•˜ì—¬ .flatMap()ìœ¼ë¡œ Redis ì €ì¥ ì²˜ë¦¬</p>\n<p>.timeout(), .subscribeOn(), .onErrorResume() ë“±ì„ í™œìš©í•´ ë‹¤ìŒì„ êµ¬í˜„:</p>\n<p>íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</p>\n<p>ì»¨ìŠˆë¨¸ ì‹¤íŒ¨ ì‹œ fallback ì²˜ë¦¬</p>\n<p>ë³‘ë ¬ ì‹¤í–‰ ì œì–´</p>\n<h3 id=\"-ì˜ˆì‹œ-ì½”ë“œ-redis-ì €ì¥\" style=\"position:relative;\">ğŸ”§ ì˜ˆì‹œ ì½”ë“œ (Redis ì €ì¥)<a href=\"#-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-redis-%EC%A0%80%EC%9E%A5\" aria-label=\" ì˜ˆì‹œ ì½”ë“œ redis ì €ì¥ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Mono</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">createVoteWithRedis</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> redisKey <span class=\"token operator\">=</span> <span class=\"token string\">\"vote:\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ğŸ“Œ Redis Increment ìš”ì²­ Key: {}\"</span><span class=\"token punctuation\">,</span> redisKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">hasKey</span><span class=\"token punctuation\">(</span>redisKey<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span>exists <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>exists <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> exists<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span>redisKey<span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">doOnNext</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">-></span> log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ğŸ” Redis Increment: {} -> {}\"</span><span class=\"token punctuation\">,</span> redisKey<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mono&lt;Void></span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span>redisKey<span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">doOnNext</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">-></span> log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ğŸ†• Redis Increment + TTL ì„¤ì •: {} -> {}\"</span><span class=\"token punctuation\">,</span> redisKey<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">expire</span><span class=\"token punctuation\">(</span>redisKey<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Duration</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofHours</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"-ê¸°ìˆ -ê°œë…-ì •ë¦¬\" style=\"position:relative;\">âœ… ê¸°ìˆ  ê°œë… ì •ë¦¬<a href=\"#-%EA%B8%B0%EC%88%A0-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC\" aria-label=\" ê¸°ìˆ  ê°œë… ì •ë¦¬ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ğŸ”¸ flatMap()ê³¼ then()ì˜ ì°¨ì´\n|í•­ëª©|â€“|flatMap()|â€“|then()|<br>\në°˜í™˜ê°’ ì‚¬ìš©\tì‚¬ìš©í•¨\tì‚¬ìš©í•˜ì§€ ì•ŠìŒ\nëª©ì \tê°’ì„ ë‹¤ìŒ ì—°ì‚°ìœ¼ë¡œ ì „ë‹¬\tìˆœì°¨ ì‹¤í–‰ë§Œ ì›í•  ë•Œ\në°˜í™˜ íƒ€ì…\tMono<R>\tMono<Void> ë˜ëŠ” ì—°ê²° Mono íƒ€ì…\nì˜ˆì‹œ\tDB ê²°ê³¼ë¡œ ë¶„ê¸° ì²˜ë¦¬\tì‘ì—… ì™„ë£Œ í›„ ë¡œê·¸ ì¶œë ¥, TTL ì„¤ì • ë“±</p>\n<p>ğŸ”¸ ì˜ˆì‹œ ë¹„êµ\nflatMap() ì‚¬ìš© ì‹œ (ê°’ì„ í™œìš©í•´ì•¼ í•  ë•Œ)\njava\në³µì‚¬\ní¸ì§‘\n.flatMap(count -> redisTemplate.expire(key, Duration.ofHours(2)))\nthen() ì‚¬ìš© ì‹œ (ê°’ ë¬´ì‹œí•˜ê³  ë‹¤ìŒ ì‹¤í–‰ë§Œ)\njava\në³µì‚¬\ní¸ì§‘\n.doOnNext(count -> log.info(â€â€¦â€))\n.then(redisTemplate.expire(key, Duration.ofHours(2)))</p>\n<h3 id=\"-ì£¼ìš”-ì„±ê³¼\" style=\"position:relative;\">âœ… ì£¼ìš” ì„±ê³¼<a href=\"#-%EC%A3%BC%EC%9A%94-%EC%84%B1%EA%B3%BC\" aria-label=\" ì£¼ìš” ì„±ê³¼ permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>300,000 íŠ¸ë˜í”½ ìˆ˜ì¤€ì—ì„œë„ ì•ˆì •ì ì¸ ë©”ì‹œì§€ ì²˜ë¦¬ ê°€ëŠ¥</p>\n<p>Redis ì €ì¥ ë³‘ëª© ì œê±°</p>\n<p>Reactive Stream ê¸°ë°˜ì˜ ì²˜ë¦¬ íë¦„ì„ íš¨ê³¼ì ìœ¼ë¡œ êµ¬ì„±</p>\n<p>íŠ¸ë˜í”½ ìœ ì‹¤ ì—†ì´ íƒ€ì„ì•„ì›ƒ ë° ì˜ˆì™¸ ìƒí™© ëŒ€ì‘ ê°€ëŠ¥</p>\n<h2 id=\"ê²°ê³¼-ë°-íšŒê³ \" style=\"position:relative;\">ê²°ê³¼ ë° íšŒê³ <a href=\"#%EA%B2%B0%EA%B3%BC-%EB%B0%8F-%ED%9A%8C%EA%B3%A0\" aria-label=\"ê²°ê³¼ ë° íšŒê³  permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>\n<p>Kafka ê¸°ë°˜ ë¹„ë™ê¸° êµ¬ì¡°ì˜ ì„±ëŠ¥ ë³‘ëª© ì›ì¸ì„ ì§„ë‹¨í•˜ê³  Topic íŒŒí‹°ì…”ë‹ ë° Consumer ë³‘ë ¬ ì²˜ë¦¬ êµ¬ì¡°ë¡œ ê°œì„ </p>\n</li>\n<li>\n<p>Kafkaì˜ ì™¸ë¶€ ì ‘ì† ì„¤ì • ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ì—¬, í´ë¼ìš°ë“œ ë‚´ ìë™í™”ëœ Broker ì„¤ì • êµ¬ì„± êµ¬ì¶•</p>\n</li>\n<li>\n<p>300,000 íŠ¸ë˜í”½ ìˆ˜ìš© í…ŒìŠ¤íŠ¸ì—ì„œ ì•ˆì •ì ì¸ ë©”ì‹œì§€ ìˆ˜ì‹  ë° Redis ì²˜ë¦¬ êµ¬ì¡° ê²€ì¦</p>\n</li>\n</ul>\n<p>ìœ„ì˜ ê°œì„ ì‚¬í•­ì„ í† ëŒ€ë¡œ ì„œë²„ 7ëŒ€ ê¸°ì¤€, <code class=\"language-text\">300,000 ë²„ìŠ¤íŠ¸ íŠ¸ë˜í”½ ì¤‘, ì•½ 29ë§Œê±´ì„ ì„±ê³µì ìœ¼ë¡œ ì¸ì‹í•œ í›„ Valkey ìºì‹œì— ì €ì¥</code>í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<iframe src=\"https://drive.google.com/file/d/1T3JBCq7wm_x2vhOhLCXr81ZaluORh19S/preview\" \n        width=\"640\" height=\"360\" allow=\"autoplay\" allowfullscreen>\n</iframe>\n<p>í•˜ì§€ë§Œ, ë‚˜ë¨¸ì§€ ìœ ì‹¤ëœ ì•½ 1ë§Œê±´ì€ ì•„ë˜ ngrinder agent ë¡œê·¸ ì²˜ëŸ¼ 504 Timeout Errorê°€ ëœ¬ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">2025</span>-06-11 <span class=\"token number\">18</span>:25:32,252 INFO  http://pickmydol-dev-alb-1687995646.ap-northeast-2.elb.amazonaws.com:81/api/v1/votes -<span class=\"token operator\">></span> <span class=\"token number\">504</span> Gateway Time-out, <span class=\"token number\">132</span> bytes\n<span class=\"token number\">2025</span>-06-11 <span class=\"token number\">18</span>:25:32,252 ERROR âŒ Error: Status <span class=\"token number\">504</span>, Body: <span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span><span class=\"token number\">504</span> Gateway Time-out<span class=\"token operator\">&lt;</span>/title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>/head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>center<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token number\">504</span> Gateway Time-out<span class=\"token operator\">&lt;</span>/h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token operator\">&lt;</span>/center<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/html<span class=\"token operator\">></span></code></pre></div>\n<p>ë”°ë¼ì„œ, í•˜ê¸° ê°œì„ ì‚¬í•­ì„ ê³„íší•˜ì˜€ê³  í–¥í›„ ì‹¤í–‰í•  ì˜ˆì •ì´ë‹¤.</p>\n<h3 id=\"-504-gateway-timeout-ëŒ€ì‘-ê²½í—˜-ê¸°ë°˜-ê³„íš\" style=\"position:relative;\">âœ… 504 Gateway Timeout ëŒ€ì‘ ê²½í—˜ ê¸°ë°˜ ê³„íš<a href=\"#-504-gateway-timeout-%EB%8C%80%EC%9D%91-%EA%B2%BD%ED%97%98-%EA%B8%B0%EB%B0%98-%EA%B3%84%ED%9A%8D\" aria-label=\" 504 gateway timeout ëŒ€ì‘ ê²½í—˜ ê¸°ë°˜ ê³„íš permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì‹¤ì‹œê°„ íˆ¬í‘œ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ë©´ì„œ ì²˜ìŒì—ëŠ” <code class=\"language-text\">504 Gateway Timeout</code>ì´ ë°œìƒí–ˆì„ ë•Œ Spring WebFlux ë‚´ë¶€ì—ì„œì˜ íƒ€ì„ì•„ì›ƒ ì„¤ì •ì´ë‚˜ Netty ê´€ë ¨ ë¬¸ì œë¼ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¡œê·¸ë¥¼ ìì„¸íˆ ë¶„ì„í•´ë³´ë‹ˆ ì‹¤ì œ ì›ì¸ì€ WebFlux ë‚´ë¶€ê°€ ì•„ë‹ˆë¼, <strong>AWS ALB(Application Load Balancer) ë‹¨ì—ì„œ ì‘ë‹µ ì§€ì—°ìœ¼ë¡œ ì¸í•´ 504 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  ìˆì—ˆë˜ ê²ƒ</strong>ì´ì—ˆë‹¤.</p>\n<p>ì¦‰, ì„œë²„ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆì—ˆì§€ë§Œ ALBê°€ ìš”ì²­ì— ëŒ€ í•œ ì‘ë‹µì„ <strong>ê¸°í•œ ë‚´ì— ë°›ì§€ ëª»í•´ì„œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ ê²ƒ</strong>ì´ì—ˆê³ , ì´ ë¬¸ì œëŠ” WebFluxì—ì„œ ì§ì ‘ ê°ì§€í•  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ê³„ì¸µì˜ ì¥ì• ì˜€ë‹¤.</p>\n<p>ê·¸ë˜ì„œ ì•„í‚¤í…ì²˜ì ìœ¼ë¡œ ì ‘ê·¼ì„ ë°”ê¾¸ê¸°ë¡œ í•˜ì˜€ë‹¤.<br>\n<strong>WebFlux ë‹¨ì—ì„œì˜ ì˜¤ë¥˜ ì²˜ë¦¬ê°€ ì•„ë‹Œ, ALBë¥¼ ê±°ì³ APIë¥¼ í˜¸ì¶œí•˜ëŠ” <code class=\"language-text\">nGrinder controller</code> ë‹¨ì—ì„œ HTTP ì‘ë‹µ ì½”ë“œë¥¼ ê°ì§€í•˜ê³ , 504 ì˜¤ë¥˜ ë°œìƒ ì‹œì—ëŠ” ë³„ë„ë¡œ êµ¬ì„±í•œ <code class=\"language-text\">/api/v1/dlq</code> APIë¡œ ë©”ì‹œì§€ë¥¼ ë¶„ê¸° ì „ì†¡</strong>í•˜ë„ë¡ ì²˜ë¦¬ ë¡œì§ì„ ë³€ê²½í•  ì˜ˆì •ì´ë‹¤.</p>\n<p>ì´ <code class=\"language-text\">/dlq</code> APIëŠ” Kafka DLQ í† í”½ì— ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ê³ , DLQConsumerëŠ” ì‹¤íŒ¨ ë°ì´í„°ë¥¼ ë¶„ì„ ê°€ëŠ¥í•œ í˜•íƒœë¡œ DBì— ì €ì¥í•˜ì—¬ ë‚˜ì¤‘ì— ì¬ì²˜ë¦¬í•˜ê±°ë‚˜, ì‹¤íŒ¨ ì›ì¸ì„ ì‹œê°í™”í•˜ê³  ìš´ì˜ì— í™œìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ê²ƒ ì´ë‹¤.</p>","frontmatter":{"title":"Pickmydol - 30ë§Œ ë²„ìŠ¤íŠ¸ íŠ¸ë˜í”½ í™˜ê²½ êµ¬ì„± íŠ¸ëŸ¬ë¸” ìŠˆíŒ… #2","summary":"Kafka ê´€ë ¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ì •ë¦¬","date":"2025.06.03.","categories":["Kafka"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVQoz63TSyvFURQF8N9loDDwzECJwS0TTBmg+AC3MBApjxJTpQyIPCIDpZRuHmHAAIXyHfhW+te+uulcpevU7tR+rL1WZx3SJ6fK04JdFP4A/uvSGdzgEvXoTQxnURORqtX+XPKIcSzhBdOR70gQqEMXGioxHMI7TnCHIqaCzT7y6MEc+rGJKyyiEwNRy5cA7zGI62A2UibnAxvYwTxucYQ1fGIBB1jBWQlwGG84DYbnmIjaE9axHXcxhjN2D1jFHrZwXC77GWNYxitmI9+MNrTG4m40hTMa0R6yR6Pv+5UzuRfR1FetDzPkQ0xW8Fu5bXIJL6Zq//NTvgC/FCQHaF1LHwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/003e6017275e1f86d1800d00e7a0a67a/b0fdb/thumbnail-kafka.png","srcSet":"/static/003e6017275e1f86d1800d00e7a0a67a/af7e7/thumbnail-kafka.png 176w,\n/static/003e6017275e1f86d1800d00e7a0a67a/412f3/thumbnail-kafka.png 351w,\n/static/003e6017275e1f86d1800d00e7a0a67a/b0fdb/thumbnail-kafka.png 702w","sizes":"(min-width: 702px) 702px, 100vw"},"sources":[{"srcSet":"/static/003e6017275e1f86d1800d00e7a0a67a/4265b/thumbnail-kafka.webp 176w,\n/static/003e6017275e1f86d1800d00e7a0a67a/e1645/thumbnail-kafka.webp 351w,\n/static/003e6017275e1f86d1800d00e7a0a67a/876ea/thumbnail-kafka.webp 702w","type":"image/webp","sizes":"(min-width: 702px) 702px, 100vw"}]},"width":702,"height":369}},"publicURL":"/static/003e6017275e1f86d1800d00e7a0a67a/thumbnail-kafka.png"}}}}]}},"pageContext":{"slug":"/pickmydol-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…_2/"}},"staticQueryHashes":[]}